<!DOCTYPE html>
<html>
<head>
<title>FxConverter</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="container">


<h2>FxConverter</h2>


<form method="POST">


<label>API Provider</label>
<select name="api" onchange="this.form.submit()">
{% for key, api in apis.items() %}
<option value="{{ key }}" {% if key == selected_api %}selected{% endif %}>
{{ api.name }}
</option>
{% endfor %}
</select>


<label>Amount</label>
<input type="number" step="0.01" name="amount" required>


<label>From Currency</label>
<select name="from_currency" required>
{% for c in currencies %}
{% if selected_api == 'frankfurter' and c not in frankfurter_currencies %}
<option value="{{ c }}" disabled class="disabled">{{ c }}</option>
{% else %}
<option value="{{ c }}">{{ c }}</option>
{% endif %}
{% endfor %}
</select>


<label>To Currency</label>
<select name="to_currency" required>
{% for c in currencies %}
{% if selected_api == 'frankfurter' and c not in frankfurter_currencies %}
<option value="{{ c }}" disabled class="disabled">{{ c }}</option>
{% else %}
<option value="{{ c }}">{{ c }}</option>
{% endif %}
{% endfor %}
</select>


<button type="submit" name="action" value="convert" disabled id="convertBtn">
    Convert
</button>


</form>


{% if error %}
<div class="error-box">{{ error }}</div>
{% endif %}


{% if result %}
<div class="result-box">{{ output }}</div>
{% endif %}


{% if volatility %}
<div class="volatility-box {{ volatility.color }}">
    {% if volatility.change is not none %}
        24h Change: {{ volatility.change }}% â€” <strong>{{ volatility.level }}</strong>
    {% else %}
        24h Change: <strong>N/A</strong>
    {% endif %}
</div>
{% endif %}


</div>


<script>
const amount = document.querySelector('input[name="amount"]');
const btn = document.getElementById('convertBtn');

amount.addEventListener('input', () => {
    btn.disabled = !amount.value;
});
</script>


</body>
</html>